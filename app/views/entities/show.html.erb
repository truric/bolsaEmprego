<p id="notice"><%= notice %></p>

<style>
  .noHover:hover {
    background: none;
  }
</style>

<h5><%= @entity.name %></h5>

<div class="row">
  <div class="col-sm-2">
    <div class="card border-0">
      <div class="card-body">
        <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px">
        <% if @entity.image.attached? %>
            <%= image_tag(@entity.image, style: "width: 150px") %>
        <% else %>
          <img src="image" alt="sem imagem">
        <% end %>
        </div>
        <div "actions">
          <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px; space-between: 40px">

            <% if user_signed_in? && current_user.role == "candidate" %>
              <button><%= link_to 'Interessado/a', new_user_registration_path(role:"entity"), style:"text-decoration: none; color: black", class:"noHover" %></button>
            <% end %>

          </div>
          <% if user_signed_in? %>
            <% if current_user.role == "backoffice" || current_user.role == "entity" && current_user.entity.id == @entity.id %>
              <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px; space-between: 40px">
                <button><%= link_to 'Edit', edit_entity_path(@entity), style:"text-decoration: none; color: black", class:"noHover" %></button>
                </br>
              </div>

              <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px; space-between: 40px">
                <td><%= link_to 'Destroy', @entity, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </div>
              
              <% end %>
            <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-2" style="margin-left: -100px">
    <div class="card border-0">
      <div class="card-body">
        <p class="card-text"><%= raw @entity.description %></p>
        <p class="card-title" style="font-weight: bold">Actividade Profissional</p>
        <p class="card-text"><%= @entity.industry %></p>
        <p class="card-title" style="font-weight: bold">Morada</p>
        <p class="card-text"><%= raw @entity.address %></p>
        <p class="card-text"><%= @entity.postal_code %></p>
        <p class="card-title" style="font-weight: bold">Contactos</p>
        <p class="card-text">Telefone: <%= @entity.phone %></p>
        <p class="card-text">Fax: <%= @entity.fax %></p>
        <p class="card-text"><%= @entity.user.email %></p>
        <p class="card-text"><%= link_to @entity.website, url_for(@entity.website), style:"color: blue; visited: yellow", class:"noHover"%></p></p>
      </div>
    </div>
  </div>
</div>

<h5>Ofertas Activas</h5>

<% @job_offers.each do |job_offer| %>

  <% if job_offer.active && @entity.id == job_offer.entities_id %>

    <div class="row">
      <div class="col-sm-2">
        <div class="card border-0">
          <div class="card-body">
            <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px">
            <% if job_offer.image.attached? %>
                <%= image_tag(job_offer.image, style: "width: 50px") %>
            <% else %>
              <img src="image" alt="sem imagem">
            <% end %>
            </div>
          </div>
        </div>
    </div>

    <div class="col-sm-2" style="margin-left: -200px">
      <div class="card border-0">
        <div class="card-body">
            <p class="card-text"><%= link_to job_offer.name, job_offer_path(job_offer.id), style:"color: blue; visited: yellow", class:"noHover"%></p>
            <p class="card-text"><%= job_offer.date %></p>
            <p class="card-text"><%= raw job_offer.description %></p>
        </div>
      </div>
    </div>

    <div style="display: flex; justify-content: left; align-items: left; margin-top: 15px; space-between: 40px">
      <div "actions">
      <% if user_signed_in? %>
        <% if current_user.role == "candidate" %>
          <button><%= link_to 'Candidatar-me', new_user_registration_path(role:"entity"), style:"text-decoration: none; color: black", class:"noHover" %></button>
        <% end %>
          <button><%= link_to 'Editar', edit_job_offer_path(job_offer), style:"text-decoration: none; color: black", class:"noHover" %></button>
          <td><%= link_to 'Destroy', job_offer, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
      </div>
    </div>

  <% end %>
  
<% end %>

<%= link_to 'Ver Entidades', entities_path, style:"color: blue; margin-top: 15px", class:"noHover" %>